<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>주소 상세</title>
  {% if kakao_js_key %}
  <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey={{ kakao_js_key }}"></script>
  {% endif %}
</head>
<body>
  <a href="{% url 'accounts:address_search' %}">←</a>
  <h1>주소 상세</h1>

  <div>
    <strong>{{ name }}</strong><br>
    <small>{{ l1 }} {{ l2 }} {{ l3 }}</small>
  </div>

  {% if kakao_js_key %}
  <div id="map" style="width:100%;height:200px;"></div>
  <script>
    (function(){
      var lat = parseFloat("{{ lat }}");
      var lng = parseFloat("{{ lng }}");
      var map = new kakao.maps.Map(document.getElementById('map'), {
        center: new kakao.maps.LatLng(lat, lng),
        level: 3
      });
      new kakao.maps.Marker({ map: map, position: new kakao.maps.LatLng(lat, lng) });
    })();
  </script>
  {% endif %}

  <form method="post" action="{% url 'accounts:address_confirm' %}">
    {% csrf_token %}
    <input type="hidden" name="name" value="{{ name }}">
    <input type="hidden" name="l1" value="{{ l1 }}">
    <input type="hidden" name="l2" value="{{ l2 }}">
    <input type="hidden" name="l3" value="{{ l3 }}">
    <input type="hidden" name="lat" value="{{ lat }}">
    <input type="hidden" name="lng" value="{{ lng }}">

    <label>상세 주소(예: 408호)
      <input type="text" name="detail" placeholder="건물명, 동/호수 등">
    </label>

    <p><button type="submit">주소 등록</button></p>
  </form>
</body>
</html>
