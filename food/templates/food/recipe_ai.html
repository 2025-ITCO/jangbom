<h2>GPT 요리 챗봇</h2>

<form method="post">
    {% csrf_token %}
    <input type="text" name="message" placeholder="오늘 뭐 먹지?" style="width:300px;">
        <button type="submit">보내기</button>
</form>

<hr>

<div style="max-width: 600px;">
    {% for msg in chat_history %}
        {% if msg.role == 'user' %}
            <p><strong> 나:</strong> {{ msg.content }}</p>
        {% elif msg.role == 'assistant' %}
            <p><strong> GPT:</strong> {{ msg.content }}</p>
        {% endif %}
    {% endfor %}
</div>

{% if latest_recipe %}
    {% if latest_recipe|length > 0 %}
        <form method="get" action="{% url 'food:recipe_ingredients' %}">
            <input type="hidden" name="recipe" value="{{ latest_recipe }}">
            <button type="submit">'{{ latest_recipe }}' 재료 분석하기</button>
        </form>
    {% endif %}
{% endif %}

